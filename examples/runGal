#!/usr/bin/tcsh
# Script to run GalSim to create galaxy image files for a run
# runGreat must be run first
if "$1" == "" then
    echo "usage: $0 base"
    exit(1)
endif
setenv base $1
if (! -d $base) then
    echo "No directory found: $base"
    exit(1)
endif
if "$2" = "" then
    setenv procs 10
else
    setenv procs $2
endif

echo "Running directory $base with $procs processes"

cd $base
galsim cgc.yaml output.nproc=$procs image.nproc=$procs
galsim cgc_psf.yaml output.nproc=$procs image.nproc=$procs
galsim cgc_star_test.yaml output.nproc=$procs image.nproc=$procs
cd ..
